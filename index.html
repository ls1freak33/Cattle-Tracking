<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cattle Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f2f2f2;--card:#fff;
  --primary:#2e7d32;--secondary:#0277bd;
  --danger:#c62828;
}
body{margin:0;padding:15px;font-family:Arial;background:var(--bg)}
h1{text-align:center}
button{width:100%;padding:15px;margin:6px 0;font-size:17px;border-radius:10px;border:none;color:#fff}
.primary{background:var(--primary)}
.secondary{background:var(--secondary)}
.danger{background:var(--danger)}
.small-danger{width:60%;margin:10px auto;padding:10px;font-size:15px}
input,select{width:100%;padding:14px;margin:6px 0;border-radius:8px;border:1px solid #ccc}
.card{background:var(--card);padding:15px;border-radius:12px;margin-top:12px}
.list-card{cursor:pointer}
.hidden{display:none}
.vax{background:#e8f5e9;padding:8px;border-radius:6px;margin:5px 0}
</style>
</head>

<body>

<h1>ğŸ„ Cattle Tracker</h1>

<div id="screens">

<!-- HOME -->
<div id="home">
  <button class="primary" onclick="showScreen('calves')">Calves</button>
  <button class="secondary" onclick="showScreen('cows')">Cows</button>
  <button class="secondary" onclick="showScreen('bulls')">Bulls</button>
</div>

<!-- CALVES -->
<div id="calves" class="hidden">
  <button class="primary" onclick="showScreen('addCalf')">â• Add Calf</button>
  <div id="calfList"></div>
  <button class="secondary" onclick="showScreen('home')">Back</button>
</div>

<!-- COWS -->
<div id="cows" class="hidden">
  <button class="primary" onclick="showScreen('addCow')">â• Add Cow</button>
  <div id="cowList"></div>
  <button class="secondary" onclick="showScreen('home')">Back</button>
</div>

<!-- BULLS -->
<div id="bulls" class="hidden">
  <button class="primary" onclick="showScreen('addBull')">â• Add Bull</button>
  <div id="bullList"></div>
  <button class="secondary" onclick="showScreen('home')">Back</button>
</div>

<!-- ADD CALF -->
<div id="addCalf" class="card hidden">
  <h2>Add Calf</h2>
  <select id="calfSex"><option>Female</option><option>Male</option></select>
  <input type="date" id="birthDate">
  <select id="damSelect"></select>
  <select id="sireSelect"></select>
  <select id="calfStatus"><option>Kept</option><option>Sold</option></select>
  <button class="primary" onclick="saveCalf()">Save Calf</button>
  <button class="secondary" onclick="showScreen('calves')">Cancel</button>
</div>

<!-- ADD COW -->
<div id="addCow" class="card hidden">
  <h2>Add Cow</h2>
  <input id="cowTag" placeholder="Cow Tag Number">
  <select id="cowColor">
    <option>Yellow</option><option>Red</option><option>Orange</option><option>White</option>
  </select>
  <button class="primary" onclick="saveCow()">Save Cow</button>
  <button class="secondary" onclick="showScreen('cows')">Cancel</button>
</div>

<!-- ADD BULL -->
<div id="addBull" class="card hidden">
  <h2>Add Bull</h2>
  <input id="bullNum" placeholder="Bull Number">
  <button class="primary" onclick="saveBull()">Save Bull</button>
  <button class="secondary" onclick="showScreen('bulls')">Cancel</button>
</div>

<!-- DETAIL -->
<div id="detail" class="card hidden"></div>

</div>

<script>
let calves=JSON.parse(localStorage.calves||"[]");
let cows=JSON.parse(localStorage.cows||"[]");
let bulls=JSON.parse(localStorage.bulls||"[]");
let current=null;

function saveAll(){
  localStorage.calves=JSON.stringify(calves);
  localStorage.cows=JSON.stringify(cows);
  localStorage.bulls=JSON.stringify(bulls);
}

function showScreen(id){
  document.querySelectorAll("#screens > div")
    .forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  refresh();
}

function refresh(){
  cowList.innerHTML=cows.map(c=>`
    <div class="card list-card" onclick="openCow('${c.tag}')">
      ğŸ„ Cow ${c.tag} (${c.color})
    </div>`).join("");

  bullList.innerHTML=bulls.map(b=>`
    <div class="card list-card" onclick="openBull('${b}')">
      ğŸ‚ Bull ${b}
    </div>`).join("");

  calfList.innerHTML=calves.map(c=>`
    <div class="card list-card" onclick="openCalf(${c.id})">
      ${c.sex} calf | ${c.status} | Dam ${c.dam}
    </div>`).join("");

  damSelect.innerHTML=cows.map(c=>`<option>${c.tag}</option>`).join("");
  sireSelect.innerHTML=bulls.map(b=>`<option>${b}</option>`).join("");
}

function saveCow(){
  cows.push({tag:cowTag.value,color:cowColor.value,vaccinations:[]});
  saveAll(); showScreen('cows');
}

function saveBull(){
  bulls.push(bullNum.value);
  saveAll(); showScreen('bulls');
}

function saveCalf(){
  calves.push({
    id:Date.now(),
    sex:calfSex.value,
    birth:birthDate.value,
    dam:damSelect.value,
    sire:sireSelect.value,
    status:calfStatus.value,
    vaccinations:[]
  });
  saveAll(); showScreen('calves');
}

function vaxList(a){
  return a.vaccinations.length
    ? a.vaccinations.map(v=>`<div class="vax">${v.name} â€” ${v.date}</div>`).join("")
    : "None";
}

function vaxForm(type){
  return `
    <h3>Add Vaccination</h3>
    <input id="vName" placeholder="Vaccine Name">
    <input type="date" id="vDate">
    <button class="primary" onclick="addVax('${type}')">Save Vaccination</button>
  `;
}

function addVax(type){
  let obj =
    type==="calf" ? calves.find(c=>c.id===current) :
    type==="cow"  ? cows.find(c=>c.tag===current) :
                     bulls.find(b=>b===current);

  if(!obj.vaccinations) obj.vaccinations=[];
  obj.vaccinations.push({name:vName.value,date:vDate.value});
  saveAll();

  type==="calf"?openCalf(current):
  type==="cow"?openCow(current):
  openBull(current);
}

function openCalf(id){
  current=id;
  let c=calves.find(x=>x.id===id);
  detail.innerHTML=`
    <h2>Calf</h2>
    Sex: ${c.sex}<br>
    Birth: ${c.birth}<br>
    Dam: ${c.dam}<br>
    Sire: ${c.sire}<br>
    Status: ${c.status}
    <h3>Vaccinations</h3>${vaxList(c)}
    ${vaxForm("calf")}
    <button class="danger small-danger" onclick="deleteCalf(${id})">Delete Calf</button>
    <button class="secondary" onclick="showScreen('calves')">Back</button>
  `;
  showScreen('detail');
}

function openCow(tag){
  current=tag;
  let cow=cows.find(c=>c.tag===tag);
  let her=calves.filter(c=>c.dam===tag);
  detail.innerHTML=`
    <h2>ğŸ„ Cow ${tag}</h2>
    Calves Produced: ${her.length}
    ${her.map(c=>`<div class="vax">${c.sex} calf | ${c.status}</div>`).join("")}
    <h3>Vaccinations</h3>${vaxList(cow)}
    ${vaxForm("cow")}
    <button class="danger small-danger" onclick="deleteCow('${tag}')">Delete Cow</button>
    <button class="secondary" onclick="showScreen('cows')">Back</button>
  `;
  showScreen('detail');
}

function openBull(num){
  current=num;
  let his=calves.filter(c=>c.sire===num);
  detail.innerHTML=`
    <h2>ğŸ‚ Bull ${num}</h2>
    Calves Sired: ${his.length}
    ${his.map(c=>`<div class="vax">${c.sex} calf | ${c.status}</div>`).join("")}
    <button class="danger small-danger" onclick="deleteBull('${num}')">Delete Bull</button>
    <button class="secondary" onclick="showScreen('bulls')">Back</button>
  `;
  showScreen('detail');
}

function deleteCow(tag){
  if(confirm("Delete cow?")){
    cows=cows.filter(c=>c.tag!==tag);
    saveAll(); showScreen('cows');
  }
}
function deleteBull(num){
  if(confirm("Delete bull?")){
    bulls=bulls.filter(b=>b!==num);
    saveAll(); showScreen('bulls');
  }
}
function deleteCalf(id){
  if(confirm("Delete calf?")){
    calves=calves.filter(c=>c.id!==id);
    saveAll(); showScreen('calves');
  }
}
</script>

</body>
</html> 